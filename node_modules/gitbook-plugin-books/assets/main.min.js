function search_layouts(){require(["gitbook","jQuery"],function(t,e){var n=function(){e('<div id="book-search-input" role="search"><input type="text" placeholder="Type to search" /></div>').prependTo(".book-summary"),e(".markdown-section").wrap('<div class="search-plus" id="book-search-results"><div class="search-noresults"></div></div>'),e('<div class="search-results"><div class="has-results"><h1 class="search-results-title"><span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1><ul class="search-results-list"></ul></div><div class="no-results"><h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1></div></div>').appendTo("#book-search-results")};t.events.bind("page.change",function(){n()})})}function ExpandableChapters(){require(["gitbook","jQuery"],function(t,e){var n="expanded",o=".chapter",s=".articles",a='<i class="exc-trigger fa"></i>',i="expChapters",r=function(){e(s).parent(o).children("a, span").append(e(a).on("click",function(t){t.preventDefault(),t.stopPropagation(),c(e(t.target).closest(o))})),e(o+" > span").on("click",function(t){t.preventDefault(),t.stopPropagation(),c(e(t.target).closest(o))}),u(d());var t=e(o+".active");u(t),u(t.parents(o))},c=function(t){t.hasClass("expanded")?l(t):u(t)},l=function(t){t.length&&t.hasClass(n)&&(t.removeClass(n),d(t))},u=function(t){t.length&&!t.hasClass(n)&&(t.addClass(n),d(t))},d=function(){var t=JSON.parse(localStorage.getItem(i))||{};if(!arguments.length)return e(o).map(function(n,o){if(t[e(this).data("level")])return this});var s=arguments[0];s.each(function(o,s){var a=e(this).data("level"),i=e(this).hasClass(n);t[a]=i}),localStorage.setItem(i,JSON.stringify(t))};t.events.bind("page.change",function(){r()})})}function GitHubButtons(){require(["gitbook"],function(t){t.events.bind("start",function(e,n){var o=n.books&&n.books.github_url?n.books.github_url:null;o&&t.toolbar.createButton({icon:"fa fa-github",label:"GitHub",position:"right",onClick:function(){window.open(o)}})})})}function sectionx(){require(["gitbook","jquery"],function(t,e){var n=function(t,n){var o=e("#"+t);o.collapse("toggle"),n&&o.parents(".panel").toggle("slow")},o=function(t,o){t.click(function(){n(o,!e(this).hasClass("atTitle")),e(this).hasClass("atTitle")||e(this).toggleClass("btn-info").toggleClass("btn-success")}),e("#"+o).on("show.bs.collapse",function(){t.html(t.attr("hide")?"<b>"+t.attr("hide")+'</b><span class="fa fa-angle-up pull-left"/>':'<span class="fa fa-angle-up"/>')}),e("#"+o).on("hide.bs.collapse",function(){t.html(t.attr("show")?"<b>"+t.attr("show")+'</b><span class="fa fa-angle-down pull-left"/>':'<span class="fa fa-angle-down"/>')})};t.events.bind("page.change",function(){e(".section").each(function(){o(e(this),e(this).attr("target"))})})})}function splitter(){require(["gitbook","jQuery"],function(t,e){e(window).width()<=600||(t.events.bind("start",function(){}),t.events.bind("page.change",function(){function n(){var t=JSON.parse(sessionStorage.getItem(a));return t=t||{},t.summaryWidth=t.summaryWidth||d.outerWidth(),t.summaryOffset=t.summaryOffset||d.position().left,t.bookBodyOffset=t.bookBodyOffset||p.position().left,t}function o(t,e,n){sessionStorage.setItem(a,JSON.stringify({summaryWidth:t,summaryOffset:e,bookBodyOffset:n}))}function s(t,e,n){d.outerWidth(t),d.offset({left:e}),p.offset({left:n}),d.css({position:"absolute"}),p.css({position:"absolute"})}var a="gitbook_split",i=!1,r=null,c=null,l=e("body"),u=e(".book"),d=e(".book-summary"),p=e(".book-body"),f=e('<div class="divider-content-summary"><div class="divider-content-summary__icon"><i class="fa fa-ellipsis-v"></i></div></div>');d.append(f),r=n(),s(r.summaryWidth,r.summaryOffset,r.bookBodyOffset),setTimeout(function(){function n(){var t=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;e(".divider-content-summary").css({top:e(".book-summary").scrollTop(),hight:t})}var a=!Boolean(e(".toggle-summary").length),i=a?e(".fa.fa-align-justify").parent():e(".toggle-summary");i.on("click",function(){var e=null,n=null,i=a?!t.sidebar.isOpen():u.hasClass("with-summary");i?(e=-d.outerWidth(),n=0):(e=0,n=d.outerWidth()),s(d.outerWidth(),e,n),o(d.outerWidth(),e,n)}),e(".on-toolbar-action").on("click",function(){e(".fa.fa-align-justify").parent()[0].click()}),e(".book-summary").scroll(function(){n()}),window.onscroll=n,window.onresize=n},1),f.on("mousedown",function(t){t.stopPropagation(),i=!0,c=d.outerWidth()-t.pageX}),l.on("mouseup",function(t){t.stopPropagation(),i=!1,o(d.outerWidth(),d.position().left,p.position().left)}),l.on("mousemove",function(t){i&&(t.stopPropagation(),t.preventDefault(),d.outerWidth(t.pageX+c),p.offset({left:t.pageX+c}))})}))})}function spoiler(){require(["gitbook","jquery"],function(t,e){t.events.bind("page.change",function(){e(".spoiler").hover(function(){e(this).addClass("hover")},function(){e(this).removeClass("hover")})})})}function copyCode(){require(["gitbook","jQuery"],function(t,e){function n(t){var e=document.createRange();e.selectNodeContents(t);var n=window.getSelection();n.removeAllRanges(),n.addRange(e)}function o(){var t="";return window.getSelection?t=window.getSelection():document.getSelection?t=document.getSelection():document.selection&&(t=document.selection.createRange().text),t}function s(t){if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var e=document.createElement("textarea");e.textContent=t,e.style.position="fixed",document.body.appendChild(e),e.select();try{return document.execCommand("copy")}catch(t){return console.warn("复制到剪贴板失败。",t),!1}finally{document.body.removeChild(e)}}}t.events.bind("page.change",function(){e("pre").each(function(){e(this).css("position","relative");var t=e("<button class='copy-code-button'>Copy</button>");t.css({position:"absolute",top:"5px",right:"5px",padding:"3px","background-color":"#313E4E",color:"white","border-radius":"5px","-moz-border-radius":"5px","-webkit-border-radius":"5px",border:"2px solid #CCCCCC"}),t.click(function(){var t=e(this).siblings("code");if(t){n(t.get(0));var a=o(),i="";1==s(a)?(i="Copied",n(t.get(0))):(i="Unable to copy",n(t.get(0))),e(this).text(i);var r=this;setTimeout(function(){e(r).text("Copy")},2e3)}}),e(this).append(t)})})})}function search(){require(["gitbook","jquery"],function(t,e){function n(t,e){var n;return function(){var o=this,s=arguments;n||(n=setTimeout(function(){n=null,t.apply(o,s)},e))}}function o(n){d=e("#book-search-results"),p=d.find(".search-results-list"),f=d.find(".search-results-title"),h=f.find(".search-results-count"),g=f.find(".search-query"),d.addClass("open");var o=0===n.count;d.toggleClass("no-results",o),p.empty(),h.text(n.count),g.text(n.query),n.results.forEach(function(o){var s=e("<li>",{class:"search-results-item"}),a=e("<h3>"),i=e("<a>",{href:t.state.basePath+"/"+o.url+"?h="+encodeURIComponent(n.query),text:o.title,"data-is-search":1});i[0].href.split("?")[0]===window.location.href.split("?")[0]&&i[0].setAttribute("data-need-reload",1);var r=o.body.trim();r.length>m&&(r+="...");var c=e("<p>").html(r);i.appendTo(a),a.appendTo(s),c.appendTo(s),s.appendTo(p)}),e(".body-inner").scrollTop(0)}function s(t){return String(t).replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")}function a(t){if(null!=t&&""!==t.trim()){var e,n=[],a=-1;for(var i in b){var r=b[i];e=t.toLowerCase();var c=!1;r.keywords&&~r.keywords.split(/\s+/).indexOf(e.split(":").pop())&&(/.:./.test(e)?e=e.split(":").slice(0,-1).join(":"):c=!0);var l=new RegExp("("+s(e)+")","gi");(c||~(a=r.body.toLowerCase().indexOf(e)))&&n.push({url:i,title:r.title,body:r.body.substr(Math.max(0,a-50),m).replace(/^[^\s,.]+./,"").replace(/(..*)[\s,.].*/,"$1").replace(l,'<span class="search-highlight-keyword">$1</span>')})}o({count:n.length,query:e,results:n})}}function i(t){function e(){a(t),w.removeClass("search-loading")}w.addClass("with-search"),w.addClass("search-loading"),n(e)()}function r(){w.removeClass("with-search"),e("#book-search-results").removeClass("open")}function c(){function t(){var t=e("#book-search-input input"),n=t.val();0===n.length?r():i(n)}var n=e("body");n.on("keyup","#book-search-input input",function(n){if(13===n.keyCode&&y){var o=u("q",e(this).val());window.history.pushState({path:o},null,o)}t()}),n.on("blur","#book-search-input input",function(t){if(y){var n=u("q",e(this).val());window.history.pushState({path:n},null,n)}})}function l(){var t,n;/\b(q|h)=([^&]+)/.test(window.location.search)&&(n=RegExp.$1,t=decodeURIComponent(RegExp.$2),"q"===n?i(t):C(t),e("#book-search-input input").val(t))}function u(t,e){e=encodeURIComponent(e);var n,o=window.location.href.replace(/([?&])(?:q|h)=([^&]+)(&|$)/,function(t,e,n,o){return"&"===o?e:""}),s=new RegExp("([?&])"+t+"=.*?(&|#|$)(.*)","gi");if(s.test(o))return"undefined"!=typeof e&&null!==e?o.replace(s,"$1"+t+"="+e+"$2$3"):(n=o.split("#"),o=n[0].replace(s,"$1$3").replace(/(&|\?)$/,""),"undefined"!=typeof n[1]&&null!==n[1]&&(o+="#"+n[1]),o);if("undefined"!=typeof e&&null!==e){var a=o.indexOf("?")!==-1?"&":"?";return n=o.split("#"),o=n[0]+a+t+"="+e,"undefined"!=typeof n[1]&&null!==n[1]&&(o+="#"+n[1]),urll}return o}var d,p,f,h,g,m=500,v=t.state,b={},y="undefined"!=typeof window.history.pushState,w=e("body");t.events.on("start",function(){c(),e.getJSON(v.basePath+"/search_plus_index.json").then(function(t){b=t,l(),r()})});var k={ignoreJoiners:!0,acrossElements:!0,separateWordSearch:!1},C=function(t){var n=e(".page-inner");/(?:(.+)?\:)(.+)/.test(t)&&n.mark(RegExp.$1,k),n.mark(t,k),setTimeout(function(){var t=e('mark[data-markjs="true"]');t.length&&t[0].scrollIntoView()},100)};t.events.on("page.change",l),window.addEventListener("click",function(t){"A"===t.target.tagName&&t.target.getAttribute("data-need-reload")&&setTimeout(function(){window.location.reload()},100)},!0)})}search_layouts(),ExpandableChapters(),GitHubButtons(),sectionx(),splitter(),spoiler(),copyCode(),search();